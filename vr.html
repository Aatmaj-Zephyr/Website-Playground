<!DOCTYPE html>
<html>
<head>

<meta http-equiv="origin-trial" data-feature="WebVR (For Chrome M59+)" >
<meta http-equiv="origin-trial" data-feature=" WebXR Device API (For Chrome M69+)" >
<meta charset="utf-8">
<title>Video</title>
<meta name="description" content="Video - A-Frame">
<script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.js"></script>

</head>
<script>
    
    const links=[
      "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
      "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",
      "https://cdn.aframe.io/videos/fireworks.mp4",
      "https://cdn.aframe.io/videos/bunny.mp4",
      "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4",
       "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",
       "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4",
       "http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4"
      ]
   
   
    var currVideoID = 0;
    /* global AFRAME */
    AFRAME.registerComponent('play-on-click', {
      init: function () {
        this.onClick = this.onClick.bind(this);
      },
      play: function () {
        window.addEventListener('click', this.onClick);
      },
      pause: function () {
        window.removeEventListener('click', this.onClick);
      },
      onClick: function (evt) {
        var videoEl = this.el.getAttribute('material').src;
        if (!videoEl) { return; }
        this.el.object3D.visible = true;
        videoEl.play();
      }
      
    });

    AFRAME.registerComponent('next', {
    schema: {
      color: {default: 'red'}
    },

    init: function () {
      var data = this.data;
      var el = this.el;  // <a-box>
      var defaultColor = el.getAttribute('material').color;

      el.addEventListener('mouseenter', function () {
        document.getElementById("videoBunny").src=links[currVideoID];
        currVideoID=currVideoID+1;
        if(currVideoID==links.length){
            currVideoID=0
        }
      });

      el.addEventListener('mouseleave', function () {
        el.setAttribute('color', defaultColor);
      });
    }
  });

  AFRAME.registerComponent('prev', {
    schema: {
      color: {default: 'red'}
    },

    init: function () {
      var data = this.data;
      var el = this.el;  // <a-box>
      var defaultColor = el.getAttribute('material').color;

      el.addEventListener('mouseenter', function () {
        document.getElementById("videoBunny").src=links[currVideoID];
        currVideoID=currVideoID-1;
        if(currVideoID==-1){
            currVideoID=links.length-1
        }
      });

      el.addEventListener('mouseleave', function () {
        el.setAttribute('color', defaultColor);
      });
    }
  });
    </script>

<body>
<a-scene>
<a-assets>
<video id="videoBunny" preload="none" src="https://www.w3schools.com/tags/movie.mp4" width="160" height="90" autoplay loop="true" ></video>
<!-- Load your panorama image asset -->
<img id="panorama" src="img.jpg" >
   
</a-assets>
<a-sky  src="#panorama"></a-sky>
<a-entity material="shader: flat; src: #videoBunny" geometry="primitive: plane; width: 160; height: 90;" position="0 0 -80" rotation="0 0 0" play-on-click >
</a-entity>
<a-entity id="rig" position="25 10 0">
  <a-entity id="camera" camera look-controls></a-entity>
</a-entity>
<a-plane height="4.5" next onclick='console.log("next")' position="-3.8 1.5 -3" id="next" rotation="0 0 0" color="#743b8f" ></a-plane>
<a-plane  height="4.5" prev onclick='console.log("previous")' position="3.8 1.5 -3" id="next" rotation="0 0 0" color="#743b8f" ></a-plane>


<a-camera>
    <a-cursor></a-cursor>
</a-camera>
</a-scene>

</body>
</html>
